---
    title: æœåŠ¡å™¨çš„ä»£ç ä¸Giteeçš„ä»£ç åŒæ­¥æ›´æ–°(è¶…è¯¦ç»†)
---

# {{ $frontmatter.title }}

å‰è¨€
 æˆ‘ä»¬æƒ³è¦å®ç°çš„åŠŸèƒ½æ˜¯ï¼šåœ¨æœ¬åœ°å§ä»£ç æ¨é€è‡³ä»“åº“åï¼Œç›´æ¥åŒæ­¥è‡³æœåŠ¡å™¨

## å‡†å¤‡å·¥ä½œ
> æœ¬æ–‡æœåŠ¡å™¨ç¯å¢ƒä¸ºcentOS7  
> å®‰è£…äº†[å®å¡”](https://www.bt.cn/new/download.html)  
> æœ€å¥½è¦æŒæ¡ Git,Giteeçš„åŸºæœ¬æ“ä½œ  

## å®ç°æ­¥éª¤

1. é¦–å…ˆè¦å»å®å¡”ç»ˆç«¯æŸ¥çœ‹æ˜¯å¦å®‰è£…`Git`(ä¸€èˆ¬é»˜è®¤æ˜¯å®‰è£…äº†çš„)
   ```sh
    git --version
   ```
2. ç”Ÿæˆå…¬é’¥
   ```sh
    ssh-keygen -t rsa
   ```
   è¾“å…¥è¿™ä¸²å‘½ä»¤åä¸€ç›´å›è½¦,å¦‚æœä¸­é€”éœ€è¦è¾“å…¥[y/n]è¯·è¾“å…¥y
   ç”Ÿæˆå…¬é’¥å,æˆ‘ä»¬å»æŸ¥çœ‹å…¬é’¥

   ```sh
    cd ~/.ssh
    ls
    cat id_rsa.pub
   ```

   å¤åˆ¶ç»¿è‰²æ¡†éƒ¨åˆ†å…¨éƒ¨å†…å®¹ï¼Œè¿™å°±æ˜¯ç”Ÿæˆçš„SSHå¯†é’¥
   ![](../../.vitepress/public/0216-1/0216-1.png)
3. åˆ›å»ºGitä»“åº“,æ·»åŠ å…¬é’¥  
   ä»“åº“å°±ç®€å•çš„é»˜è®¤ä»“åº“å°±å¥½,è¦è®°å¥½ä»“åº“å,è¿›å…¥ä»“åº“ç®¡ç†çš„æ·»åŠ å…¬é’¥åŠŸèƒ½,å°†ä¸Šé¢å¤åˆ¶çš„å¯†é’¥copyè¿›åº•ä¸‹å,æ ‡é¢˜ä¼šè‡ªåŠ¨ç”Ÿæˆ,ç›´æ¥ç‚¹å‡»æ·»åŠ å³å¯ã€‚  
   ![](../../.vitepress/public/0216-1/0216-2.png)  
4. å®å¡”å®‰è£…`WebHook`å¹¶é…ç½®
   åœ¨å®å¡”ç•Œé¢çš„è½¯ä»¶å•†åº—é‡Œæœç´¢webhookå¹¶å®‰è£…ï¼Œå®‰è£…æˆåŠŸåæ·»åŠ è„šæœ¬  
   ![](../../.vitepress/public/0216-1/0216-3.png)  
   ![](../../.vitepress/public/0216-1/0216-4.png)  
   è„šæœ¬ä»£ç (ä¸ç”¨ä¿®æ”¹ä¸œè¥¿)[è„šæœ¬æ¥æº](https://blog.csdn.net/shallow77/article/details/110292878)
   ```sh
   #!/bin/bash
    echo ""
    #è¾“å‡ºå½“å‰æ—¶é—´
    date --date='0 days ago' "+%Y-%m-%d %H:%M:%S"
    echo "Start"
    #åˆ¤æ–­å®å¡”WebHookå‚æ•°æ˜¯å¦å­˜åœ¨
    if [ ! -n "$1" ];
    then 
            echo "paramå‚æ•°é”™è¯¯"
            echo "End"
            exit
    fi
    #gité¡¹ç›®è·¯å¾„
    gitPath="/www/wwwroot/$1"
    #git ç½‘å€
    gitHttp="https://gitee.com/xxx/$1.git" //è‡ªå·±ä»“åº“çš„é“¾æ¥
    echo "Webç«™ç‚¹è·¯å¾„ï¼š$gitPath"
    #åˆ¤æ–­é¡¹ç›®è·¯å¾„æ˜¯å¦å­˜åœ¨
    if [ -d "$gitPath" ]; then
            cd $gitPath
            #åˆ¤æ–­æ˜¯å¦å­˜åœ¨gitç›®å½•
            if [ ! -d ".git" ]; then
                    echo "åœ¨è¯¥ç›®å½•ä¸‹å…‹éš† git"
                    sudo git clone $gitHttp gittemp
                    sudo mv gittemp/.git .
                    sudo rm -rf gittemp
            fi
            echo "æ‹‰å–æœ€æ–°çš„é¡¹ç›®æ–‡ä»¶"
            #sudo git reset --hard origin/master
            sudo git pull        
            echo "è®¾ç½®ç›®å½•æƒé™"
            sudo chown -R www:www $gitPath
            echo "End"
            exit
    else
            echo "è¯¥é¡¹ç›®è·¯å¾„ä¸å­˜åœ¨"
                    echo "æ–°å»ºé¡¹ç›®ç›®å½•"
            mkdir $gitPath
            cd $gitPath
            #åˆ¤æ–­æ˜¯å¦å­˜åœ¨gitç›®å½•
            if [ ! -d ".git" ]; then
                    echo "åœ¨è¯¥ç›®å½•ä¸‹å…‹éš† git"
                    sudo git clone $gitHttp gittemp
                    sudo mv gittemp/.git .
                    sudo rm -rf gittemp
            fi
            echo "æ‹‰å–æœ€æ–°çš„é¡¹ç›®æ–‡ä»¶"
            #sudo git reset --hard origin/master
            sudo git pull
            echo "è®¾ç½®ç›®å½•æƒé™"
            sudo chown -R www:www $gitPath
            echo "End"
            exit
    fi
   ```
   ä¿å­˜åæˆ‘ä»¬é‡å¯å®å¡”(æˆ–é‡å¯æœåŠ¡å™¨)  
   é‡å¯åï¼Œè¿›å…¥è½¯ä»¶å•†åº—ï¼ŒæŸ¥çœ‹æˆ‘ä»¬å®å¡”WebHookç”Ÿæˆçš„å¯†é’¥ï¼Œå¤åˆ¶ç»¿è‰²æ¡†é‡Œçš„å†…å®¹  
   ![](../../.vitepress/public/0216-1/0216-5.png)  
   ![](../../.vitepress/public/0216-1/0216-6.png)  
5. é…ç½®Giteeçš„WebHooks  
   è¿›å…¥ä»“åº“çš„WebHooksåŠŸèƒ½é¡µé¢(è¿›å…¥ä»“åº“ --> ç®¡ç† --> å·¦ä¾§åˆ—è¡¨æœ‰WebHooks)  
   è¿™éƒ¨åˆ†çœ‹å›¾ç‰‡å†…å®¹å¼„ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯URLæœ€åçš„aaaå¿…é¡»æœ€åä¸€ä¸ªæ˜¯ä»“åº“åï¼Œå‰é¢å¯ä»¥æ ¹æ®è‡ªå·±æƒ³æ”¾çš„ä½ç½®æ·»åŠ çˆ¶çº§ç›®å½•  
   ![](../../.vitepress/public/0216-1/0216-7.png)
6. å°†Giteeä»“åº“cloneåˆ°æœåŠ¡å™¨çš„æœ¬åœ°ç›®å½•ä¸­  
   å…ˆåœ¨å®å¡”ç»ˆç«¯è®¾ç½®æˆ‘ä»¬çš„Gitä¿¡æ¯
   ```sh
    git config --global user.name "ç”¨æˆ·å"
    git config --global user.email "é‚®ç®±"
    git config --global credential.helper store //ä¼šç”Ÿæˆ.gitconfig çš„æ–‡ä»¶
    cat ~/.gitconfig  //æ˜¾ç¤ºå†…å®¹
   ```
   ç„¶åè¿›å…¥åˆ°ä½ è¦æ”¾æ–‡ä»¶çš„ç›®å½•ä¸‹,å°†ä»“åº“cloneä¸‹æ¥,ç„¶åè¾“å…¥è´¦å·å¯†ç 
   ```sh
    cd /www/wwwroot/
    git clone https://gitee.com/XXX/XXX.git  //cloneåé¢æ˜¯ä¸‹è½½é“¾æ¥
   ```
7. æˆåŠŸåå°±å·²ç»é…ç½®å¥½äº†,æˆ‘ä»¬å¯ä»¥æ¥åˆ°Gitä»“åº“çš„WebHookç•Œé¢æ¥æµ‹è¯•  
   ![](../../.vitepress/public/0216-1/0216-8.png)  
   ç‚¹å‡»æµ‹è¯•å,ç‚¹å‡»æŸ¥çœ‹æ›´å¤šå¦‚æœè¿”å›å€¼æ˜¯200,é‚£ä¹ˆå°±ä»£è¡¨æˆåŠŸäº†
   ![](../../.vitepress/public/0216-1/0216-9.png)  
## åç»­æ›´æ–°
> æ ¹æ®ä¸Šæ–¹æ­¥éª¤å°±å·²ç»æˆåŠŸäº†,æˆ‘ä»¬å³å¯å§ä»£ç åŒæ­¥è‡³æœåŠ¡å™¨`è¿™æ ·çš„è¯æ¯æ¬¡æäº¤éœ€è¦å°†é¡¹ç›®æ‰“åŒ…ç„¶åå§distç›®å½•ä¹Ÿæäº¤ä¸Šå»` ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦é…ç½®åŸŸå  
> æ–¹æ³•1:é€šè¿‡å®å¡” ---> ç½‘ç«™ ---> è®¾ç½® ---> ç½‘ç«™ç›®å½•,ä»æ–°é€‰æ‹©ç›®å½•åˆ°æˆ‘ä»¬ğŸ“¦åçš„distç›®å½•ä¸‹ 
> æ–¹æ³•2:è‡ªå·±é…ç½®ngxinä»£ç†,å®‰è£…å¥½nginxååœ¨nginx.confæ–‡ä»¶ä¸­é…ç½®å¦‚ä¸‹ä»£ç 
```sh
    server{
        listen 80; # å¦‚æœæœ‰ https çš„è¯ è¯·å†æ·»åŠ 443ç«¯å£çš„ç›‘å¬
        server_name xxx.xxx.xxx # åŸŸå;
        location / {
            root /www/wwwroot/xxx.xxx.xxx/xxx/dist;
            index index.html index.htm;
        }
    }
```

[è¿”å›](/page/index)